RUN:
  OPA_NAMES: ["10u_raw_daily_noon","10v_raw_daily_noon","2d_raw_daily_noon","tp_sum_daily_noon","2t_raw_daily_noon", "2t_mean_daily", "tp_mean_daily", "skt_mean_monthly", "2t_min_daily"]
  APP_NAMES: ["WILDFIRES_FWI","MHM","AQUA","URBAN"]
JOBS:
  LOCAL_SETUP:
    FILE: templates/local_setup.sh
    PLATFORM: LOCAL
    RUNNING: once
  SYNCHRONIZE:
    FILE: templates/synchronize.sh
    PLATFORM: LOCAL
    DEPENDENCIES: LOCAL_SETUP
    RUNNING: once
  REMOTE_SETUP:
    FILE: templates/remote_setup.sh,templates/fdb/config.yaml
    # Compilation needs to be done in the login node for being able to clone packages
    PLATFORM: "%DEFAULT.HPCARCH%-login"
    DEPENDENCIES: SYNCHRONIZE
    RUNNING: once
    WALLCLOCK: '02:00'
  INI:
    FILE: templates/ini.sh
    PLATFORM: "%DEFAULT.HPCARCH%-login"
    DEPENDENCIES: REMOTE_SETUP
    RUNNING: member
    WALLCLOCK: '00:30'
  SIM:
    FILE: <to-be-replaced-by-user-conf>
    PLATFORM: "%DEFAULT.HPCARCH%"
    DEPENDENCIES: INI SIM-1
    running: chunk
    WALLCLOCK: '00:30'
  DN:
    FILE: "templates/dn.sh,conf/mother_request.yml"
    DEPENDENCIES:
      SIM:
        STATUS: "RUNNING"
      DN:
        SPLITS_FROM:
          'all':
            SPLITS_TO: 'previous'
    RUNNING: chunk
    WALLCLOCK: '00:15'
    PLATFORM: "%DEFAULT.HPCARCH%-login"
    SPLITS: 48
  OPA:
    FOR:
      NAME: "%RUN.OPA_NAMES%" #"%OPA_NAMES"
      SPLITS: "[2,2,2,2,2,2,2,2,2]" #"%OPA_SPLITS%"
      DEPENDENCIES:
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[24:%JOBS.DN.SPLITS%]*\\24" #To DN
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24"  # To DN
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24"  # To DN
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24"  # To DN
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24"  # To DN
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24" # To DN 
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24" # To DN
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24" # To DN
        - DN:
            SPLITS_FROM: # From OPA
              "all":
                  SPLITS_TO: "[1:%JOBS.DN.SPLITS%]*\\24" # To DN
    FILE: templates/opa.sh
    PLATFORM: "%DEFAULT.HPCARCH%"
    RUNNING: chunk
  APP:
    FOR:
      NAME: "%RUN.APP_NAMES%"
      SPLITS: "[2,2,2,2]"
      DEPENDENCIES:
        - OPA_10U_RAW_DAILY_NOON:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"
          OPA_10V_RAW_DAILY_NOON:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"
          OPA_2T_RAW_DAILY_NOON:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"
          OPA_2D_RAW_DAILY_NOON:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"
          OPA_TP_SUM_DAILY_NOON:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"
        - OPA_2T_MEAN_DAILY:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"
          OPA_TP_MEAN_DAILY:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"  
        - OPA_SKT_MEAN_MONTHLY:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*"    
        - OPA_2T_MIN_DAILY:
            SPLITS_FROM:
              'all':
                  SPLITS_TO: 'all' #"[1:%JOBS.DN.SPLITS%]*" 
    FILE: "templates/application.sh,templates/only_lra.yaml"
    DEPENDENCIES: OPA
    RUNNING: chunk
    WALLCLOCK: '00:05'
    PLATFORM: "%DEFAULT.HPCARCH%"
